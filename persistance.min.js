const e=["7","8","9"],o=["2","3"],arguments=process.argv.slice(2),t={value:0,persistance:0},l=e=>"0"===e,s=(e,o=1)=>{let t=Array(o),l=[],s=n=>{if(n===o){let e=t.slice().sort().join("");return l.some(o=>e===o)||l.push(e),void(e=void 0)}for(let o of e)t[n]=o,o=void 0,s(n+1)};return s(0),t=void 0,l},n=(e,o=e,t=0)=>{if(1===o.length)return{value:e,persistance:t};if(o.some(l))return{value:e,persistance:t+=2};t++;let s=1;o.map(e=>s*=parseInt(e));let a=n(e,s.toString().split(""),t);return s=void 0,a},a=(l={value:0,persistance:0})=>{if(!global.gc)return void console.log("Garbage collection is not exposed\nrun with '--expose_gc'");Object.assign(t,l);let a=t.persistance+1;for(;;){global.gc(),console.log("\tAt size ->",a);let l=s(e,a);for(let e of o.map(e=>l.map(o=>e+o)).flat()){let o=n(e.split(""));e=void 0,o.persistance>t.persistance?(o.value=parseInt(o.value.join("")),Object.assign(t,o),console.log("\nFound ->",o,"\n")):o=void 0}l=void 0,a++}};switch(console.log("\nRunning persistance calculator\n------------------------------\n"),arguments[0]){case void 0:case"run":{let e;try{e=JSON.parse(arguments[1])}finally{a(e)}break}case"calculate":try{const e=parseInt(arguments[1]).toString().split(""),o=n(e);o.value=parseInt(o.value.join("")),console.log(o)}catch(r){console.log("Invalid integer ->",arguments[1])}break;default:console.log("Invalid argument ->",arguments[0])}module.exports=a,module.exports.calculate=n,module.exports.combine=s;
